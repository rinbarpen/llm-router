INFO:     Started server process [3294092]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:18000 (Press CTRL+C to quit)
INFO:     127.0.0.1:46378 - "GET /models/openrouter/x-ai/grok-4.1-fast%3Afree/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:51418 - "GET /models/gemini/gemini-2.5-flash HTTP/1.1" 200 OK
INFO:     127.0.0.1:54122 - "GET /models/gemini/gemini-2.5-flash/v1 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:34226 - "GET /models/gemini/gemini-2.5-flash/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53686 - "GET /models/gemini/gemini-2.5-flash/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:53698 - "GET /models/gemini/gemini-2.5-flash/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49412 - "GET /models/gemini/gemini-2.5-flash/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:48734 - "GET /models/openrouter/x-ai/grok-4.1-fast%3Afree/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55710 - "GET /models/openrouter/x-ai/grok-4.1-fast%3Afree/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54344 - "GET /models/openrouter/ HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54352 - "GET /models/openrouter HTTP/1.1" 200 OK
INFO:     127.0.0.1:33900 - "GET /models/openrouter/openrouter-grok-4.1-fast HTTP/1.1" 200 OK
INFO:     127.0.0.1:57092 - "GET /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completition HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57106 - "GET /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completion HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:33430 - "GET /models/openrouter/openrouter-grok-4.1-fast/v1 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:54450 - "GET /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completion HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:58910 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:50608 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:52706 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:38588 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:37656 - "POST /models/openrouter/grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:49060 - "POST /models/openrouter/grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:38622 - "POST /models/openrouter/grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
  File "/home/rczx/.local/share/uv/python/cpython-3.10.18-linux-x86_64-gnu/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/api/app.py", line 53, in __call__
    await self.app(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/api/routes.py", line 861, in openai_chat_completions
    response = await engine.invoke_by_identifier(
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/services/router_engine.py", line 86, in invoke_by_identifier
    return await self._invoke_model(session, model, request)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/services/router_engine.py", line 162, in _invoke_model
    response = await client.invoke(model, request)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/providers/gemini.py", line 33, in invoke
    response = await session.post(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1859, in post
    return await self.request(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/home/rczx/.local/share/uv/python/cpython-3.10.18-linux-x86_64-gnu/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout
INFO:     127.0.0.1:38638 - "POST /models/openrouter/grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:45264 - "POST /models/openrouter/grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:56890 - "POST /models/gemini/gemini-2.5-flash/v1/chat/completions HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection.py", line 101, in handle_async_request
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_async/connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_backends/auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
  File "/home/rczx/.local/share/uv/python/cpython-3.10.18-linux-x86_64-gnu/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/api/app.py", line 53, in __call__
    await self.app(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/api/routes.py", line 861, in openai_chat_completions
    response = await engine.invoke_by_identifier(
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/services/router_engine.py", line 86, in invoke_by_identifier
    return await self._invoke_model(session, model, request)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/services/router_engine.py", line 162, in _invoke_model
    response = await client.invoke(model, request)
  File "/home/rczx/workspace/sxy/gym/llm-router/src/llm_router/providers/gemini.py", line 33, in invoke
    response = await session.post(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1859, in post
    return await self.request(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/home/rczx/.local/share/uv/python/cpython-3.10.18-linux-x86_64-gnu/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/rczx/workspace/sxy/gym/llm-router/.venv/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout
INFO:     127.0.0.1:38682 - "POST /models/openrouter/grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:60428 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:38372 - "POST /v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:38350 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:48358 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:37610 - "POST /models/openrouter/grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:53462 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:46038 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:50082 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:41176 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:52928 - "GET /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:52928 - "GET /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:52928 - "GET /favicon.ico HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:57332 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:36362 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:42194 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:52616 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:52400 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:49102 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:50000 - "POST /models/openrouter/openrouter-grok-4.1-fast/v1/chat/completions HTTP/1.1" 400 Bad Request
